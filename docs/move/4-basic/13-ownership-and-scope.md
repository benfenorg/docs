# 所有权与作用域

在Move中，每一个变量都有一个所有者和一个作用域。Move的所有权借鉴于Rust语言，对Rust熟悉的开发人员可以很容易地学习Move的所有权，而非Rust的开发人员则需要花费一点时间来学习所有权。

在一个函数中定义的变量，它的所有者就是函数本身。当函数结束时，变量将被释放：

```
fun magic() {
    let a = 123; // a的所有者是magic
    let b = a * a; // b的所有者是magic
} // a和b在此处释放
```

当函数结束但没有返回值时，变量a和b将被释放。

然而，当函数返回一个值时，变量将不会被释放，相反，它的所有权被转移给调用者：

```
fun magic() {
    let a = 123; // a的所有者是magic
    let b = a * a; // b的所有者是magic
    b // b的所有者将在此转移给调用者
} // a在此处释放,b不会释放

fun test() {
    let x = magic();
    // x就是magic内部的b
    // x的所有者是test函数
} // x在此处释放
```

## 值传递

当我们将一个变量作为参数传递给另一个函数时，则变量的所有权将转移给该函数：

```
fun magic(a: u64) {
    // a的所有权是magic
} // a在此处释放

fun test() {
    let x = 123;
    magic(x); // x的所有权被转移给magic
    // x在此处已经无效了
    let y = x; // 编译错误: 无法引用x!
}
```

与常见的编程语言不同的是，当test()函数内部传递变量x给magic()函数时，该变量的所有权随之转移给调用函数，此后，变量在test()函数就无效了，我们无法在后续代码中引用x，否则会造成编译错误！
